{"version":3,"sources":["webpack:///./src/styles.css?75ca","webpack:///./src/styles.css","webpack:///../engine/src/CanvasProvider.js","webpack:///../engine/src/Loop.js","webpack:///../engine/src/Assets.js","webpack:///../engine/src/Dispatcher.js","webpack:///../engine/src/State.js","webpack:///../engine/src/Key.js","webpack:///../engine/src/utils.js","webpack:///../engine/src/index.js","webpack:///./src/MainMenu.js","webpack:///./src/Hitpoints.js","webpack:///./src/Rect.js","webpack:///./src/Hero.js","webpack:///./src/Game.js","webpack:///./src/SceneManager.js","webpack:///./src/index.js","webpack:///../engine/src/ActionConstants.js","webpack:///./src/hero_front.png"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","canvasElement","context","getCanvasElement","createContext","width","height","document","createElement","setAttribute","ResizeObserver","entries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","contentRect","value","scale","style","concat","err","observe","body","appendChild","getContext","drawImage","_ref","x","y","asset","clearRect","_ref2","w","h","drawRect","_ref3","_ref4","color","fillStyle","fillRect","drawLine","drawPoint","loopEvents","pausedEvents","timers","isRunning","loadedAssets","queue","assets","Promise","all","Object","keys","map","assetName","resolve","reject","source","img","Image","src","onload","onerror","dispatchGlobal","action","root","toGameObject","id","clear","combineActions","ids","filter","Boolean","reduce","acc","curr","_toConsumableArray","getQueue","globalStateMap","globalState","allGameObjects","defaultGameObjectState","z","pivotX","pivotY","angle","visible","hasChildren","gameObject","children","Array","isArray","length","updateGameObjects","branch","dt","Dispatcher","forEach","state","update","dispatch","globalDispatch","apply","arguments","toChildren","getChildrenFor","child","updatedGameObject","updatedState","accumulator","currentValue","_objectSpread","shallowEqual","Key","backspace","tab","enter","shift","ctrl","alt","escape","left","up","right","down","insert","delete","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","j","k","l","m","n","o","p","q","r","s","t","u","v","numpad0","numpad1","numpad2","numpad3","numpad4","numpad5","numpad6","numpad7","numpad8","numpad9","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","semiColon","equalSign","comma","dash","period","forwardSlash","openBracket","backSlash","closeBraket","singleQuote","gameObjects","taskName","taskFunction","render","graphics","initialState","hitpointsMax","hitpointsValue","heroAsset","Assets","type","Hitpoints","Rect","preload","hero","keyCode","Hero","activeScene","MainMenu","Game","SceneManager","CanvasProvider","populateGlobalStateByBranch","branchName","shortid","generate","index","_child","_slicedToArray","template","console","log","addEventListener","clientX","clientY","renderGameObjects","offset","name","then","time","loop","requestAnimationFrame","call","window","now","performance","timer","tick","eventName"],"mappings":"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","file":"main.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"body {\\r\\n  font-family: sans-serif;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  padding: 0;\\r\\n  margin: 0;\\r\\n  background-color: #000;\\r\\n}\\r\\n\\r\\nbody {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n}\\r\\n\", \"\"]);\n\n","import ResizeObserver from 'resize-observer-polyfill';\n\nlet context = null;\nlet canvasElement;\n\nexport const getCanvasElement = () => canvasElement;\n\nexport function createContext(width, height) {\n  /* eslint no-restricted-syntax: 0 */\n\n  canvasElement = document.createElement('canvas');\n  canvasElement.setAttribute('width', width);\n  canvasElement.setAttribute('height', height);\n\n  const ro = new ResizeObserver((entries) => {\n    for (const { contentRect } of entries) {\n      if (contentRect.width < width) {\n        const scale = contentRect.width / width;\n\n        canvasElement.style.transform = `scale(${scale}, ${scale})`;\n      } else if (contentRect.height < height) {\n        const scale = contentRect.height / height;\n\n        canvasElement.style.transform = `scale(${scale}, ${scale})`;\n      } else {\n        canvasElement.style.transform = 'scale(1.0, 1.0)';\n      }\n    }\n  });\n\n  ro.observe(document.body);\n\n  document.body.appendChild(canvasElement);\n\n  context = canvasElement.getContext('2d');\n}\n\nexport const drawImage = ({ x, y }) => (asset) => {\n  context.drawImage(asset, x, y);\n};\n\nexport const clearRect = ({\n  x, y, w, h,\n}) => () => {\n  context.clearRect(x, y, w, h);\n};\n\nexport const drawRect = ({\n  x, y, w, h,\n}) => ({ color }) => {\n  context.fillStyle = color;\n  context.fillRect(x, y, w, h);\n};\n\nexport function drawLine() {}\nexport function drawPoint() {}\n","import { requestAnimationFrame, performance } from 'animframe';\n\nlet loopEvents = {};\nlet pausedEvents = {};\nconst timers = [];\n\nlet isRunning = true;\n\nexport const run = () => {\n  let time;\n\n  (function loop() {\n    requestAnimationFrame.call(window, loop);\n\n    const now = performance.now();\n    const dt = now - (time || now);\n\n    time = now;\n\n    if (!isRunning) {\n      return;\n    }\n\n    timers.forEach((timer) => {\n      timer.tick(now);\n    });\n\n    Object.keys(loopEvents).forEach((eventName) => {\n      if (!pausedEvents[eventName]) {\n        loopEvents[eventName](dt);\n      }\n    });\n  }());\n};\n\n/**\n * @method stop\n */\nexport const stop = () => {\n  isRunning = false;\n};\n\nexport const clear = () => {\n  loopEvents = {};\n  pausedEvents = {};\n};\n\nexport const on = (taskName, taskFunction) => {\n  loopEvents[taskName] = taskFunction;\n  pausedEvents[taskName] = false;\n};\n\nexport const off = (taskName) => {\n  delete loopEvents[taskName];\n  if (pausedEvents[taskName] != null) {\n    delete pausedEvents[taskName];\n  }\n};\n\nexport const pause = (taskName) => {\n  pausedEvents[taskName] = true;\n};\n\nexport const resume = (taskName) => {\n  if (taskName == null) {\n    isRunning = true;\n    return;\n  }\n\n  pausedEvents[taskName] = false;\n};\n","const loadedAssets = {};\n\nexport const queue = assets =>\n  Promise.all(\n    Object.keys(assets).map(\n      assetName =>\n        new Promise((resolve, reject) => {\n          const source = assets[assetName];\n\n          const img = new Image();\n          img.src = source;\n\n          img.onload = () => {\n            loadedAssets[assetName] = img;\n            resolve(loadedAssets);\n          };\n\n          img.onerror = (err) => {\n            reject(err);\n          };\n        }),\n    ),\n  );\n\nexport const resolve = assetName => loadedAssets[assetName];\n","let queue = {};\n\nexport const dispatchGlobal = (action) => {\n  (queue.root = queue.root || []).push(action);\n};\n\nexport const toGameObject = id => (action) => {\n  (queue[id] = queue[id] || []).push(action);\n};\n\nexport const clear = () => {\n  queue = {};\n};\n\nexport const combineActions = ids =>\n  ids\n    .map(id => queue[id])\n    .filter(Boolean)\n    .reduce((acc, curr) => [...acc, ...curr], []);\n\nexport const getQueue = () => queue;\n","import shortid from 'shortid';\nimport shallowEqual from 'shallowequal';\n\nimport * as CanvasProvider from './CanvasProvider';\nimport * as Assets from './Assets';\nimport { combineActions } from './Dispatcher';\n\nconst globalStateMap = {};\nconst globalState = {};\nconst allGameObjects = {};\n\nconst defaultGameObjectState = {\n  x: 0,\n  y: 0,\n  z: 0,\n  pivotX: 0,\n  pivotY: 0,\n  angle: 0,\n  visible: true,\n};\n\nconst hasChildren = gameObject =>\n  gameObject.children && Array.isArray(gameObject.children) && gameObject.children.length > 0;\n\nexport const getChildrenFor = id => globalStateMap[id];\n\nexport const populateGlobalStateByBranch = (branchName, gameObjects) => {\n  globalStateMap[branchName] = gameObjects.map(() => shortid.generate());\n\n  gameObjects.forEach((child, index) => {\n    const id = globalStateMap[branchName][index];\n\n    let initialState = {};\n    let gameObject = null;\n\n    if (Array.isArray(child)) {\n      const [template, options] = child;\n      initialState = { ...template.initialState, ...options };\n      gameObject = template;\n    } else {\n      initialState = { ...child.initialState };\n      gameObject = child;\n    }\n\n    globalState[id] = {\n      ...defaultGameObjectState,\n      ...initialState,\n    };\n\n    allGameObjects[id] = gameObject;\n\n    if (hasChildren(gameObject)) {\n      populateGlobalStateByBranch(globalStateMap[branchName][index], gameObject.children);\n    }\n  });\n};\n\nexport const debugLogState = () => {\n  console.log(globalStateMap);\n  console.log(globalState);\n  console.log(allGameObjects);\n};\n\nexport const preloadGameObjects = () =>\n  Promise.all(\n    Object.keys(allGameObjects)\n      .map(name => allGameObjects[name])\n      .map(({ preload }) => preload)\n      .filter(Boolean)\n      .map(preload => Assets.queue(preload())),\n  );\n\nexport const renderGameObjects = (branch, offset = { x: 0, y: 0 }) => {\n  globalStateMap[branch].forEach((id) => {\n    const gameObject = allGameObjects[id];\n    const state = globalState[id];\n\n    if (state.visible) {\n      if (gameObject.render) {\n        gameObject.render({\n          ...state,\n          x: state.x + offset.x,\n          y: state.y + offset.y,\n        })(CanvasProvider);\n      }\n\n      if (hasChildren(gameObject)) {\n        renderGameObjects(id, { x: state.x, y: state.y });\n      }\n    }\n  });\n};\n\nexport const updateGameObjects = (branch, dt, Dispatcher) => {\n  globalStateMap[branch].forEach((id) => {\n    const gameObject = allGameObjects[id];\n    const state = globalState[id];\n\n    if (gameObject.update) {\n      const dispatch = (...args) => Dispatcher.globalDispatch(...args);\n      dispatch.toChildren = action =>\n        getChildrenFor(id).forEach(child => Dispatcher.toGameObject(child)(action));\n\n      const updatedGameObject = gameObject.update(state, dispatch);\n\n      const updatedState = combineActions(['root', id]).reduce(\n        (accumulator, currentValue) => ({\n          ...accumulator,\n          ...updatedGameObject(currentValue, dt / 100),\n        }),\n        state,\n      );\n\n      if (!shallowEqual(state, updatedState)) {\n        globalState[id] = updatedState;\n      }\n    }\n\n    if (hasChildren(gameObject)) {\n      updateGameObjects(id, dt, Dispatcher);\n    }\n  });\n};\n","const Key = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  ctrl: 17,\n  alt: 18,\n  escape: 27,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  insert: 45,\n  delete: 46,\n  0: 48,\n  1: 49,\n  2: 50,\n  3: 51,\n  4: 52,\n  5: 53,\n  6: 54,\n  7: 55,\n  8: 56,\n  9: 57,\n  a: 65,\n  b: 66,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  g: 71,\n  h: 72,\n  i: 73,\n  j: 74,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  o: 79,\n  p: 80,\n  q: 81,\n  r: 82,\n  s: 83,\n  t: 84,\n  u: 85,\n  v: 86,\n  w: 87,\n  x: 88,\n  y: 89,\n  z: 90,\n  numpad0: 96,\n  numpad1: 97,\n  numpad2: 98,\n  numpad3: 99,\n  numpad4: 100,\n  numpad5: 101,\n  numpad6: 102,\n  numpad7: 103,\n  numpad8: 104,\n  numpad9: 105,\n  f1: 112,\n  f2: 113,\n  f3: 114,\n  f4: 115,\n  f5: 116,\n  f6: 117,\n  f7: 118,\n  f8: 119,\n  f9: 120,\n  f10: 121,\n  f11: 122,\n  f12: 123,\n  semiColon: 186,\n  equalSign: 187,\n  comma: 188,\n  dash: 189,\n  period: 190,\n  forwardSlash: 191,\n  openBracket: 219,\n  backSlash: 220,\n  closeBraket: 221,\n  singleQuote: 222,\n};\n\nexport default Key;\n","export const localToGlobal = () => {};\nexport const globalToLocal = () => {};\nexport const isPointInRect = point => rect =>\n  point.x >= rect.x && point.y >= rect.y && point.x < rect.x + rect.w && point.y < rect.y + rect.h;\n\nconst validProps = ['preload', 'children', 'name', 'render', 'update', 'initialState'];\n\nexport const moduleToGameObject = mod =>\n  validProps.reduce((acc, currentValue) => ({ ...acc, [currentValue]: mod[currentValue] }), {});\n","import * as CanvasProvider from './CanvasProvider';\nimport * as Loop from './Loop';\nimport * as ActionConstants from './ActionConstants';\nimport * as Assets from './Assets';\nimport {\n  populateGlobalStateByBranch,\n  renderGameObjects,\n  updateGameObjects,\n  preloadGameObjects,\n  debugLogState,\n} from './State';\nimport * as Dispatcher from './Dispatcher';\n\nimport Key from './Key';\n\nexport * from './utils';\n\nexport { Assets, ActionConstants, Key };\n\nexport default function (width, height, gameObjects) {\n  CanvasProvider.createContext(width, height);\n\n  populateGlobalStateByBranch('root', gameObjects);\n  debugLogState();\n\n  CanvasProvider.getCanvasElement().addEventListener('mousedown', ({ clientX, clientY }) => {\n    Dispatcher.dispatchGlobal({\n      type: ActionConstants.MOUSE_DOWN,\n      x: clientX,\n      y: clientY,\n    });\n  });\n\n  CanvasProvider.getCanvasElement().addEventListener('mouseup', ({ clientX, clientY }) => {\n    Dispatcher.dispatchGlobal({\n      type: ActionConstants.MOUSE_UP,\n      x: clientX,\n      y: clientY,\n    });\n  });\n\n  document.addEventListener('keydown', ({ keyCode }) => {\n    Dispatcher.dispatchGlobal({ type: ActionConstants.KEY_DOWN, keyCode });\n  });\n\n  document.addEventListener('keyup', ({ keyCode }) => {\n    Dispatcher.dispatchGlobal({ type: ActionConstants.KEY_DOWN, keyCode });\n  });\n\n  Loop.on('loop', (dt) => {\n    CanvasProvider.clearRect({\n      x: 0,\n      y: 0,\n      w: width,\n      h: height,\n    })();\n    CanvasProvider.drawRect({\n      x: 0,\n      y: 0,\n      w: width,\n      h: height,\n    })({\n      color: '#fff',\n    });\n\n    renderGameObjects('root');\n    updateGameObjects('root', dt, Dispatcher);\n\n    Dispatcher.clear();\n  });\n\n  preloadGameObjects().then(() => Loop.run());\n}\n","export const render = state => (graphics) => {};\n","import { Assets } from 'engine';\n\nexport const initialState = {\n  x: 0,\n  y: -10,\n  hitpointsMax: 100,\n  hitpointsValue: 80,\n};\n\nexport const render = state => (graphics) => {\n  const heroAsset = Assets.resolve('hero');\n\n  graphics.drawRect({\n    x: state.x,\n    y: state.y,\n    w: heroAsset.width,\n    h: 5,\n  })({ color: 'red' });\n\n  graphics.drawRect({\n    x: state.x,\n    y: state.y,\n    w: (state.hitpointsValue / state.hitpointsMax) * heroAsset.width,\n    h: 5,\n  })({ color: 'green' });\n};\n\nexport const update = state => (action = {}, dt) => {\n  switch (action.type) {\n    case 'INCREASE_HITPOINTS': {\n      return { hitpointsValue: state.hitpointsValue + 1 };\n    }\n\n    case 'DECREASE_HITPOINTS': {\n      return { hitpointsValue: state.hitpointsValue - 1 };\n    }\n\n    default:\n      return {};\n  }\n};\n","export const initialState = {\n  x: 100,\n  y: 100,\n  w: 100,\n  h: 100,\n};\n\nexport const render = state => (graphics) => {\n  graphics.drawRect(state)({ color: 'yellow' });\n};\n","import { Assets, Key } from 'engine';\nimport hero from './hero_front.png';\n\nimport * as Hitpoints from './Hitpoints';\nimport * as Rect from './Rect';\n\nexport const initialState = {\n  x: 20,\n  y: 20,\n};\n\nexport const children = [Hitpoints, Rect];\n\nexport const preload = () => ({\n  hero,\n});\n\nexport const render = state => (graphics) => {\n  const heroAsset = Assets.resolve('hero');\n\n  graphics.drawImage(state)(heroAsset);\n};\n\nexport const update = (state, dispatch) => (action = {}, dt) => {\n  switch (action.type) {\n    case 'KEY_DOWN': {\n      dispatch.toChildren({ type: 'DECREASE_HITPOINTS' });\n\n      if (action.keyCode === Key.right) {\n        return { x: state.x + 10 * dt };\n      }\n\n      if (action.keyCode === Key.left) {\n        return { x: state.x - 10 * dt };\n      }\n\n      if (action.keyCode === Key.up) {\n        return { y: state.y - 10 * dt };\n      }\n\n      if (action.keyCode === Key.down) {\n        return { y: state.y + 10 * dt };\n      }\n\n      return {};\n    }\n\n    default:\n      return {};\n  }\n};\n","import * as Hero from './Hero';\nimport * as Hitpoints from './Hitpoints';\n\nexport const children = [Hero, [Hitpoints, { y: 0, hitpointsValue: 50 }]];\n\nexport const render = state => (graphics) => {};\n","import * as MainMenu from './MainMenu';\nimport * as Game from './Game';\n\nexport const initialState = {\n  activeScene: 'MainMenu',\n};\n\nexport const children = [MainMenu, Game];\n","import icescraper from 'engine';\n\nimport * as SceneManager from './SceneManager';\n\nimport './styles.css';\n\nicescraper(600, 600, [SceneManager]);\n","export const KEY_UP = 'KEY_UP';\nexport const KEY_DOWN = 'KEY_DOWN';\nexport const MOUSE_DOWN = 'MOUSE_DOWN';\nexport const MOUSE_UP = 'MOUSE_UP';\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}